<!DOCTYPE html>
<html lang="zh-Hant" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã€Šç‰§å ´ç‰©èªã€‹æ¼”è®Šå²ï¼šä¸€ä»½äº’å‹•å¼è³‡è¨Šåœ–è¡¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Brilliant Blues -->
    <!-- Application Structure Plan: The infographic follows a linear, narrative-driven structure, guiding the user chronologically and thematically through the history of Harvest Moon. 1. **Hero Section:** Grabs attention with a bold title and a summary of the game's impact. 2. **Core Pillars:** Uses four donut charts to visually represent the foundational gameplay loop. 3. **Founding Era:** A horizontal bar chart compares key features of early games, showing rapid evolution. 4. **The Great Schism:** A clear, non-interactive flowchart visualizes the brand split, a crucial point of clarification. 5. **Modernization & Influence:** A radar chart compares key modern features against Stardew Valley, illustrating the "reverse influence" effect. 6. **Future Outlook:** A concluding text section summarizes the series' current challenges. This top-to-bottom flow tells a coherent story, making the complex history digestible. -->
    <!-- Visualization & Content Choices: 1. **Core Pillars:** Goal: Inform. Viz: Four Donut Charts (Chart.js). Justification: Quickly shows the four equal components of the core gameplay loop. 2. **Early Games (Table 1.1):** Goal: Compare. Viz: Horizontal Bar Chart (Chart.js). Justification: Better for comparing categories (games) across a few metrics (features) than a dense table. 3. **Brand Split:** Goal: Organize. Viz: HTML/CSS Flowchart. Justification: A static diagram is the clearest way to explain this complex but non-numeric process. NO SVG/Mermaid used. 4. **Modern Features vs. Stardew Valley (Table 4.1):** Goal: Compare/Relationships. Viz: Radar Chart (Chart.js). Justification: Excellent for comparing multiple entities (SOS vs. Stardew) across multiple common variables (features), showing where each "excels" and illustrating the competitive pressure. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Roboto', 'Noto Sans TC', sans-serif;
            background-color: #F0F9FF; /* sky-50 */
            color: #1E293B; /* slate-800 */
        }
        .chart-container {
            position: relative; 
            width: 100%; 
            max-width: 600px; 
            margin-left: auto; 
            margin-right: auto; 
            height: 300px;
            max-height: 400px;
        }
        .chart-container-large {
            position: relative; 
            width: 100%; 
            max-width: 800px; 
            margin-left: auto; 
            margin-right: auto; 
            height: 400px;
            max-height: 50vh;
        }
         @media (min-width: 768px) {
            .chart-container { height: 350px; }
            .chart-container-large { height: 500px; }
        }
        .lang-btn.active {
            background-color: #0284C7; /* sky-600 */
            color: white;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">
        <div class="flex justify-end mb-4">
            <div class="flex border border-slate-300 rounded-lg p-1">
                <button id="lang-zh" class="lang-btn px-3 py-1 text-sm font-semibold rounded-md" data-lang="zh-Hant">ä¸­æ–‡</button>
                <button id="lang-en" class="lang-btn px-3 py-1 text-sm font-semibold rounded-md" data-lang="en">EN</button>
            </div>
        </div>

        <header class="text-center my-8 md:my-16">
            <h1 class="text-4xl md:text-6xl font-bold text-sky-700" data-lang-key="title"></h1>
            <p class="mt-4 text-xl md:text-2xl font-semibold text-sky-900" data-lang-key="subtitle"></p>
            <p class="mt-4 max-w-3xl mx-auto text-slate-600" data-lang-key="intro_p"></p>
        </header>

        <main class="space-y-16 md:space-y-24">

            <section id="core-pillars">
                <div class="text-center mb-10">
                    <h2 class="text-3xl font-bold text-slate-800" data-lang-key="pillars_h2"></h2>
                    <p class="mt-2 text-slate-600 max-w-2xl mx-auto" data-lang-key="pillars_p"></p>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                        <div class="chart-container mx-auto h-48 sm:h-56">
                            <canvas id="farmingChart"></canvas>
                        </div>
                        <h3 class="text-xl font-bold mt-4 text-blue-700" data-lang-key="pillar_farm_h3"></h3>
                        <p class="text-sm text-slate-500 mt-1" data-lang-key="pillar_farm_p"></p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                        <div class="chart-container mx-auto h-48 sm:h-56">
                            <canvas id="animalChart"></canvas>
                        </div>
                        <h3 class="text-xl font-bold mt-4 text-blue-700" data-lang-key="pillar_animal_h3"></h3>
                        <p class="text-sm text-slate-500 mt-1" data-lang-key="pillar_animal_p"></p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                        <div class="chart-container mx-auto h-48 sm:h-56">
                            <canvas id="communityChart"></canvas>
                        </div>
                        <h3 class="text-xl font-bold mt-4 text-blue-700" data-lang-key="pillar_community_h3"></h3>
                        <p class="text-sm text-slate-500 mt-1" data-lang-key="pillar_community_p"></p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                        <div class="chart-container mx-auto h-48 sm:h-56">
                            <canvas id="familyChart"></canvas>
                        </div>
                        <h3 class="text-xl font-bold mt-4 text-blue-700" data-lang-key="pillar_family_h3"></h3>
                        <p class="text-sm text-slate-500 mt-1" data-lang-key="pillar_family_p"></p>
                    </div>
                </div>
            </section>
            
            <section id="founding-era">
                <div class="text-center mb-10">
                    <h2 class="text-3xl font-bold text-slate-800" data-lang-key="era_h2"></h2>
                    <p class="mt-2 text-slate-600 max-w-2xl mx-auto" data-lang-key="era_p"></p>
                </div>
                <div class="bg-white p-4 md:p-8 rounded-xl shadow-lg">
                    <div class="chart-container-large">
                        <canvas id="earlyGamesChart"></canvas>
                    </div>
                </div>
            </section>
            
            <section id="brand-split">
                <div class="text-center mb-10">
                    <h2 class="text-3xl font-bold text-slate-800" data-lang-key="split_h2"></h2>
                    <p class="mt-2 text-slate-600 max-w-2xl mx-auto" data-lang-key="split_p"></p>
                </div>
                <div class="bg-white p-6 md:p-10 rounded-xl shadow-lg">
                    <div class="flex flex-col items-center space-y-4">
                        <div class="p-4 bg-slate-100 rounded-lg text-center">
                            <p class="font-semibold" data-lang-key="split_dev_title"></p>
                            <p class="text-2xl font-bold text-blue-800">Marvelous</p>
                            <p class="text-sm text-slate-500" data-lang-key="split_dev_subtitle"></p>
                        </div>
                        <div class="text-4xl text-sky-400">â†“</div>
                        <div class="w-full text-center p-4 bg-slate-100 rounded-lg">
                             <p class="font-semibold" data-lang-key="split_partner_title"></p>
                             <p class="text-xl font-bold text-cyan-700">Natsume Inc.</p>
                             <p class="text-sm text-slate-500" data-lang-key="split_partner_subtitle"></p>
                        </div>
                        <div class="text-4xl text-sky-400">â†“</div>
                        <div class="w-full p-4 border-2 border-dashed border-red-400 rounded-lg text-center">
                            <h3 class="text-xl font-bold text-red-600" data-lang-key="split_event"></h3>
                        </div>
                        <div class="text-4xl text-sky-400">â†“</div>
                        <div class="w-full grid md:grid-cols-2 gap-6 text-center">
                            <div class="p-4 bg-blue-50 border-l-4 border-blue-500 rounded-lg">
                                 <p class="font-semibold" data-lang-key="split_marvelous_title"></p>
                                 <p class="text-2xl font-bold text-blue-700 mt-2">Story of Seasons</p>
                                 <p class="mt-1 text-slate-600" data-lang-key="split_marvelous_subtitle"></p>
                            </div>
                             <div class="p-4 bg-cyan-50 border-l-4 border-cyan-500 rounded-lg">
                                 <p class="font-semibold" data-lang-key="split_natsume_title"></p>
                                 <p class="text-2xl font-bold text-cyan-700 mt-2">Harvest Moon</p>
                                 <p class="mt-1 text-slate-600" data-lang-key="split_natsume_subtitle"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="modernization">
                 <div class="text-center mb-10">
                    <h2 class="text-3xl font-bold text-slate-800" data-lang-key="modern_h2"></h2>
                    <p class="mt-2 text-slate-600 max-w-2xl mx-auto" data-lang-key="modern_p"></p>
                </div>
                <div class="bg-white p-4 md:p-8 rounded-xl shadow-lg">
                    <div class="chart-container-large">
                        <canvas id="comparisonRadarChart"></canvas>
                    </div>
                     <div class="mt-6 text-sm text-slate-500 text-center">
                        <p data-lang-key="modern_note"></p>
                    </div>
                </div>
            </section>
            
            <footer class="text-center my-12 md:my-20 border-t pt-8 border-slate-200">
                <h2 class="text-3xl font-bold text-slate-800" data-lang-key="future_h2"></h2>
                 <p class="mt-4 max-w-3xl mx-auto text-slate-600" data-lang-key="future_p"></p>
            </footer>

        </div>
    </div>
<script>
document.addEventListener('DOMContentLoaded', () => {

    const translations = {
        'zh-Hant': {
            title: 'ä¸€æ®µè¾²å ´å‚³å¥‡çš„æ¼”è®Š',
            subtitle: 'ã€Šç‰§å ´ç‰©èªã€‹ç³»åˆ—æ·±åº¦å‰–æ',
            intro_p: 'å¾ä¸€å€‹é©å‘½æ€§çš„ã€Œæº«é¦¨ç”Ÿæ´»éŠæˆ²ã€ç†å¿µï¼Œåˆ°å½±éŸ¿å…¨çƒçš„æ–‡åŒ–ç¾è±¡ã€‚ã€Šç‰§å ´ç‰©èªã€‹ä¸åƒ…é–‹å‰µäº†ä¸€å€‹éŠæˆ²é¡å‹ï¼Œæ›´åœ¨æ™‚ä»£çš„æ´ªæµä¸­ä¸æ–·è›»è®Šã€‚é€™ä»½è³‡è¨Šåœ–è¡¨å°‡å¸¶æ‚¨æ·±å…¥æ¢ç´¢å…¶æ ¸å¿ƒç©æ³•ã€é—œéµè½‰æŠ˜èˆ‡æœªä¾†çš„æŒ‘æˆ°ã€‚',
            pillars_h2: 'æº«é¦¨ç”Ÿæ´»çš„å››å¤§æ”¯æŸ±',
            pillars_p: 'éŠæˆ²çš„æ ¸å¿ƒå»ºç«‹åœ¨å››å¤§æ”¯æŸ±ä¹‹ä¸Šï¼Œé€™äº›å…ƒç´ å…±åŒæ§‹æˆäº†ä¸€ç¨®ç¨ç‰¹çš„é«”é©—ï¼Œè®“ç©å®¶æ²‰æµ¸åœ¨ä¸€å€‹ç¯€å¥ç·©æ…¢ã€å……æ»¿å›å ±çš„ç”°åœ’ç”Ÿæ´»ä¸­ã€‚',
            pillar_farm_h3: 'ğŸŒ± è€•ç¨®ä½œç‰©',
            pillar_farm_p: 'æ’­ç¨®ã€æ¾†æ°´ã€æ”¶ç©«ï¼Œæ„Ÿå—å››å­£æ›´è¿­èˆ‡åœŸåœ°çš„å›å ±ã€‚',
            pillar_animal_h3: 'ğŸ„ é£¼é¤Šå‹•ç‰©',
            pillar_animal_p: 'ç…§é¡§å¯æ„›çš„å‹•ç‰©ï¼Œæ›ä¾†æº«æš–çš„è›‹å¥¶ç”¢å“èˆ‡å¿ƒéˆçš„æ…°è—‰ã€‚',
            pillar_community_h3: 'ğŸ’¬ ç¤¾å€äº’å‹•',
            pillar_community_p: 'èˆ‡æ€§æ ¼å„ç•°çš„æ‘æ°‘äº¤æµï¼ŒåƒåŠ å­£ç¯€ç¥­å…¸ï¼Œå»ºç«‹æ·±åšå‹èª¼ã€‚',
            pillar_family_h3: 'â¤ï¸ å»ºç«‹å®¶åº­',
            pillar_family_p: 'è¿½æ±‚å¿ƒå„€å°è±¡ï¼Œæ­¥å…¥å©šå§»ï¼Œé«”é©—äººç”Ÿçš„å®Œæ•´é€±æœŸã€‚',
            era_h2: 'å¥ åŸºæ™‚ä»£çš„å¿«é€Ÿæ¼”é€² (1996-2003)',
            era_p: 'ç³»åˆ—æ—©æœŸä½œå“åœ¨çŸ­çŸ­æ•¸å¹´å…§è¿…é€Ÿè¿­ä»£ï¼Œä¸æ–·å¼•å…¥å’Œå®Œå–„æ ¸å¿ƒæ©Ÿåˆ¶ã€‚ä¸‹åœ–æ¯”è¼ƒäº†å¹¾æ¬¾é—œéµæ—©æœŸä½œå“çš„ç‰¹å¾µï¼Œå±•ç¤ºäº†å¾åš´æ ¼é™åˆ¶åˆ°é€æ­¥é–‹æ”¾çš„è¨­è¨ˆå“²å­¸è½‰è®Šã€‚',
            split_h2: 'ä¸€å€‹è¾²å ´ï¼Œå…©å€‹åè™Ÿï¼š2014å¹´çš„å“ç‰Œåˆ†è£‚',
            split_p: 'å°æ–¼è¥¿æ–¹ç©å®¶è€Œè¨€ï¼Œç³»åˆ—è¿‘ä»£å²å› ä¸€å ´å•†æ¥­åˆ†è£‚è€Œå……æ»¿å›°æƒ‘ã€‚ä»¥ä¸‹çš„æµç¨‹åœ–æ¸…æ¥šåœ°å±•ç¤ºäº†æ­£çµ±ç³»åˆ—å¦‚ä½•æ›´åï¼Œä»¥åŠåŸåå¦‚ä½•è¢«ç”¨æ–¼å…¨æ–°é–‹ç™¼çš„éŠæˆ²ã€‚',
            split_dev_title: 'æ—¥æœ¬é–‹ç™¼å•†',
            split_dev_subtitle: 'ã€ŠBokujÅ Monogatariã€‹ç³»åˆ—å‰µä½œè€…',
            split_partner_title: 'è¥¿æ–¹ç™¼è¡Œå¤¥ä¼´é—œä¿‚ (~2014)',
            split_partner_subtitle: 'è² è²¬æœ¬åœ°åŒ–ä¸¦æŒæœ‰"Harvest Moon"å•†æ¨™',
            split_event: '2014å¹´ï¼šåˆä½œçµæŸ',
            split_marvelous_title: 'Marvelous (é€éXSEEDç™¼è¡Œ)',
            split_marvelous_subtitle: 'æ­£çµ±ç³»åˆ—çš„<span class="font-bold">æ–°åç¨±</span>',
            split_natsume_title: 'Natsume Inc.',
            split_natsume_subtitle: 'ä¿ç•™èˆŠåç¨±ï¼Œ<span class="font-bold">è‡ªè¡Œé–‹ç™¼æ–°ä½œ</span>',
            modern_h2: 'ç¾ä»£åŒ–èˆ‡ã€Šæ˜Ÿéœ²è°·ç‰©èªã€‹çš„é€†å‘å½±éŸ¿',
            modern_p: 'ã€Šæ˜Ÿéœ²è°·ç‰©èªã€‹çš„æˆåŠŸï¼Œå°å…¶éˆæ„Ÿä¾†æºç”¢ç”Ÿäº†æ·±é å½±éŸ¿ã€‚ä¸‹æ–¹çš„é›·é”åœ–æ¯”è¼ƒäº†ç¾ä»£ã€ŠStory of Seasonsã€‹èˆ‡ã€Šæ˜Ÿéœ²è°·ç‰©èªã€‹åœ¨å¹¾å€‹é—œéµç³»çµ±ä¸Šçš„ç•°åŒï¼Œæ­ç¤ºäº†é€™ç¨®ã€Œé€†å‘å€Ÿé‘’ã€çš„ç¾è±¡ã€‚',
            modern_note: 'åœ–è¡¨åˆ†æ•¸ï¼ˆ1-5ï¼‰åŸºæ–¼å ±å‘Šä¸­çš„å®šæ€§æè¿°é€²è¡Œç¶œåˆè©•ä¼°ï¼Œ5åˆ†ä»£è¡¨è©²ç³»çµ±æ›´ç‚ºæ·±å…¥ã€æµæš¢æˆ–å—å¥½è©•ã€‚',
            future_h2: 'è¾²å ´çš„æœªä¾†',
            future_p: 'å¦‚ä»Šï¼Œã€ŠStory of Seasonsã€‹é¢è‡¨è‘—åœ¨ã€Œå‚³æ‰¿çš„é‡é‡ã€ã€ã€Œå‰µæ–°çš„éœ€æ±‚ã€èˆ‡ã€Œç«¶çˆ­çš„å£“åŠ›ã€ä¸‰è€…é–“å°‹æ±‚å¹³è¡¡çš„æŒ‘æˆ°ã€‚ç³»åˆ—çš„æœªä¾†ï¼Œå–æ±ºæ–¼èƒ½å¦å·§å¦™åœ°èåˆç¾ä»£ç‰¹è‰²ï¼ŒåŒæ™‚ä¸å¤±å…¶ç¨ç‰¹çš„ã€Œæº«é¦¨ã€éˆé­‚ï¼Œä¸¦åœ¨ä¸€å€‹ç”±è‡ªå·±é–‹å‰µã€ä½†å·²ä¸å†ç”±è‡ªå·±ç¨éœ¸çš„ä¸–ç•Œè£¡ï¼Œé‡æ–°å®šç¾©å…¶å­˜åœ¨çš„æ„ç¾©ã€‚',
            donut_farming: 'è€•ç¨®',
            donut_animal: 'é£¼é¤Š',
            donut_community: 'ç¤¾å€',
            donut_family: 'å®¶åº­',
            bar_label_limit: 'æœ‰æ™‚é–“é™åˆ¶',
            bar_label_female: 'å¯é¸å¥³ä¸»è§’',
            bar_label_rival: 'æœ‰æˆ€æ„›æ•µæ‰‹',
            bar_tooltip_yes: 'æ˜¯',
            bar_tooltip_no: 'å¦',
            bar_game_1: 'ã€Šç‰§å ´ç‰©èªã€‹/ SFC (1996)',
            bar_game_2: 'ã€Šç‰§å ´ç‰©èª2ã€‹/ N64 (1999)',
            bar_game_3: 'ã€Šç‰§å ´ç‰©èªGBã€‹/ GB (1999)',
            bar_game_4: ['ã€Šç¤¦çŸ³é®çš„å¤¥ä¼´å€‘ã€‹', '/ GBA (2003)'],
            radar_label_sos: 'Story of Seasons (ç¾ä»£)',
            radar_label_sv: 'æ˜Ÿéœ²è°·ç‰©èª',
            radar_cat_1: 'ç¤¦æ´æˆ°é¬¥',
            radar_cat_2: 'ç‰©å“è£½ä½œç³»çµ±',
            radar_cat_3: 'åšç‰©é¤¨/æè´ˆ',
            radar_cat_4: 'æ¯æ—¥å§”è¨—',
            radar_cat_5: 'åº«å­˜ç®¡ç†ä¾¿åˆ©æ€§',
        },
        'en': {
            title: 'The Evolution of a Farming Legend',
            subtitle: 'A Deep Dive into the Story of Seasons Series',
            intro_p: 'From a revolutionary "heartwarming life game" concept to a global cultural phenomenon, Story of Seasons (formerly Harvest Moon) not only created a genre but has continuously evolved. This infographic explores its core gameplay, key turning points, and future challenges.',
            pillars_h2: 'The Four Pillars of a Heartwarming Life',
            pillars_p: 'The core of the game is built on four pillars. These elements combine to create a unique experience, immersing players in a slow-paced, rewarding pastoral life.',
            pillar_farm_h3: 'ğŸŒ± Crop Farming',
            pillar_farm_p: 'Sow seeds, water them, and harvest to feel the changing seasons and the bounty of the land.',
            pillar_animal_h3: 'ğŸ„ Animal Husbandry',
            pillar_animal_p: 'Care for cute animals to receive warm products like eggs and milk, and find spiritual comfort.',
            pillar_community_h3: 'ğŸ’¬ Community Interaction',
            pillar_community_p: 'Interact with villagers of diverse personalities, participate in seasonal festivals, and build deep friendships.',
            pillar_family_h3: 'â¤ï¸ Building a Family',
            pillar_family_p: 'Pursue your love interest, get married, and experience the full cycle of life.',
            era_h2: 'Rapid Evolution of the Founding Era (1996-2003)',
            era_p: 'The series\' early entries iterated rapidly, introducing and refining core mechanics. The chart below compares key features of early titles, showing the design shift from strict limits to gradual openness.',
            split_h2: 'One Farm, Two Names: The 2014 Brand Schism',
            split_p: 'For Western players, the series\' modern history is confusing due to a business split. This flowchart clarifies how the original series was renamed and how the old name was used for new games.',
            split_dev_title: 'Japanese Developer',
            split_dev_subtitle: 'Creator of the "BokujÅ Monogatari" series',
            split_partner_title: 'Western Publishing Partnership (~2014)',
            split_partner_subtitle: 'Handled localization and owned the "Harvest Moon" trademark',
            split_event: '2014: Partnership Ends',
            split_marvelous_title: 'Marvelous (via XSEED)',
            split_marvelous_subtitle: 'The <span class="font-bold">new name</span> for the original series',
            split_natsume_title: 'Natsume Inc.',
            split_natsume_subtitle: 'Kept the old name, began <span class="font-bold">developing new games</span>',
            modern_h2: 'Modernization & The Stardew Valley "Reverse-Influence"',
            modern_p: 'The success of Stardew Valley profoundly influenced its inspiration. This radar chart compares modern Story of Seasons with Stardew Valley on key systems, revealing this "reverse-influence" phenomenon.',
            modern_note: 'Chart scores (1-5) are based on qualitative descriptions from the report. A score of 5 represents a system that is deeper, more streamlined, or better-received.',
            future_h2: 'The Future of the Farm',
            future_p: 'Today, Story of Seasons faces the challenge of balancing three competing forces: the weight of its legacy, the need for innovation, and the pressure of competition. Its future depends on blending modern features without losing its unique "heartwarming" soul.',
            donut_farming: 'Farming',
            donut_animal: 'Animals',
            donut_community: 'Community',
            donut_family: 'Family',
            bar_label_limit: 'Time Limit',
            bar_label_female: 'Female PC Option',
            bar_label_rival: 'Rival Marriages',
            bar_tooltip_yes: 'Yes',
            bar_tooltip_no: 'No',
            bar_game_1: 'Harvest Moon / SFC (1996)',
            bar_game_2: 'Harvest Moon 2 / N64 (1999)',
            bar_game_3: 'Harvest Moon GB / GB (1999)',
            bar_game_4: ['Friends of Mineral Town', '/ GBA (2003)'],
            radar_label_sos: 'Story of Seasons (Modern)',
            radar_label_sv: 'Stardew Valley',
            radar_cat_1: 'Mine Combat',
            radar_cat_2: 'Crafting System',
            radar_cat_3: 'Museum/Donation',
            radar_cat_4: 'Daily Quests',
            radar_cat_5: 'QoL & Tracking',
        }
    };

    let currentLanguage = 'zh-Hant';
    let charts = [];

    const palette = {
        blue: '#0284C7', // sky-600
        cyan: '#0891B2', // cyan-600
        teal: '#0D9488', // teal-600
        emerald: '#059669', // emerald-600
        lightBlue: 'rgba(2, 132, 199, 0.2)',
        lightCyan: 'rgba(8, 145, 178, 0.2)',
        lightTeal: 'rgba(13, 148, 136, 0.2)',
        lightEmerald: 'rgba(5, 150, 105, 0.2)',
    };
    
    const destroyCharts = () => {
        charts.forEach(chart => chart.destroy());
        charts = [];
    };

    const createAllCharts = (lang) => {
        destroyCharts();
        const t = translations[lang];

        const createDonutChart = (elementId, labelKey, color) => {
            const ctx = document.getElementById(elementId).getContext('2d');
            const chart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: [t[labelKey], ''],
                    datasets: [{ data: [100, 25], backgroundColor: [color, '#E5E7EB'], borderWidth: 0 }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false, cutout: '75%',
                    plugins: { legend: { display: false }, tooltip: { enabled: false } }
                }
            });
            charts.push(chart);
        };
        
        createDonutChart('farmingChart', 'donut_farming', palette.emerald);
        createDonutChart('animalChart', 'donut_animal', palette.cyan);
        createDonutChart('communityChart', 'donut_community', palette.teal);
        createDonutChart('familyChart', 'donut_family', palette.blue);
        
        const earlyGamesCtx = document.getElementById('earlyGamesChart').getContext('2d');
        const earlyGamesLabels = [t.bar_game_1, t.bar_game_2, t.bar_game_3, t.bar_game_4];
        const earlyGamesChart = new Chart(earlyGamesCtx, {
            type: 'bar',
            data: {
                labels: earlyGamesLabels,
                datasets: [
                    { label: t.bar_label_limit, data: [1, 1, 0, 0], backgroundColor: palette.lightBlue, borderColor: palette.blue, borderWidth: 2 },
                    { label: t.bar_label_female, data: [0, 0, 1, 0], backgroundColor: palette.lightCyan, borderColor: palette.cyan, borderWidth: 2 },
                    { label: t.bar_label_rival, data: [0, 1, 0, 1], backgroundColor: palette.lightTeal, borderColor: palette.teal, borderWidth: 2 }
                ]
            },
            options: {
                indexAxis: 'y', responsive: true, maintainAspectRatio: false,
                scales: {
                    x: { stacked: true, ticks: { display: false }, grid: { display: false } },
                    y: { stacked: true, ticks: { font: { size: 14, weight: '500' }, color: '#334155' }, grid: { display: false } }
                },
                plugins: {
                    legend: { position: 'bottom', labels: { font: { size: 14 } } },
                    tooltip: {
                        callbacks: {
                            title: function(tooltipItems) {
                                let label = tooltipItems[0].chart.data.labels[tooltipItems[0].dataIndex];
                                return Array.isArray(label) ? label.join('') : label;
                            },
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) { label += ': ' + (context.raw > 0 ? t.bar_tooltip_yes : t.bar_tooltip_no); }
                                return label;
                            }
                        }
                    }
                }
            }
        });
        charts.push(earlyGamesChart);
        
        const radarCtx = document.getElementById('comparisonRadarChart').getContext('2d');
        const radarLabels = [t.radar_cat_1, t.radar_cat_2, t.radar_cat_3, t.radar_cat_4, t.radar_cat_5];
        const radarChart = new Chart(radarCtx, {
            type: 'radar',
            data: {
                labels: radarLabels,
                datasets: [
                    { label: t.radar_label_sos, data: [2, 3, 3, 4, 3], fill: true, backgroundColor: palette.lightCyan, borderColor: palette.cyan, pointBackgroundColor: palette.cyan, pointBorderColor: '#fff', pointHoverBackgroundColor: '#fff', pointHoverBorderColor: palette.cyan },
                    { label: t.radar_label_sv, data: [4, 5, 4, 4, 5], fill: true, backgroundColor: palette.lightBlue, borderColor: palette.blue, pointBackgroundColor: palette.blue, pointBorderColor: '#fff', pointHoverBackgroundColor: '#fff', pointHoverBorderColor: palette.blue }
                ]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: { color: 'rgba(0, 0, 0, 0.1)' }, grid: { color: 'rgba(0, 0, 0, 0.1)' },
                        pointLabels: { font: { size: 14 } },
                        ticks: { backdropColor: 'transparent', stepSize: 1 },
                        min: 0, max: 5
                    }
                },
                plugins: {
                    legend: { position: 'top', labels: { font: { size: 16 } } },
                    tooltip: {
                        callbacks: {
                            title: function(tooltipItems) {
                                let label = tooltipItems[0].chart.data.labels[tooltipItems[0].dataIndex];
                                return Array.isArray(label) ? label.join('') : label;
                            }
                        }
                    }
                }
            }
        });
        charts.push(radarChart);
    };

    const translatePage = (lang) => {
        currentLanguage = lang;
        document.documentElement.lang = lang === 'zh-Hant' ? 'zh-Hant' : 'en';
        
        document.querySelectorAll('[data-lang-key]').forEach(el => {
            const key = el.dataset.langKey;
            if (translations[lang][key]) {
                el.innerHTML = translations[lang][key];
            }
        });

        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        document.getElementById(`lang-${lang === 'zh-Hant' ? 'zh' : 'en'}`).classList.add('active');

        createAllCharts(lang);
    };

    document.getElementById('lang-zh').addEventListener('click', () => translatePage('zh-Hant'));
    document.getElementById('lang-en').addEventListener('click', () => translatePage('en'));

    translatePage(currentLanguage);
});
</script>
</body>
</html>
