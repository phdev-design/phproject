<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥æœ¬çš„é»æ˜ï¼šå¾ç¥è©±åˆ°åœ‹å®¶</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', 'Noto Sans TC', sans-serif;
            background-color: #E0E1DD;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .text-shadow {
            text-shadow: 2px 2px 4px rgba(0,0,0,0.4);
        }
        .flow-line::before {
            content: '';
            position: absolute;
            left: 50%;
            top: -1.25rem;
            bottom: -1.25rem;
            width: 2px;
            background-color: #778DA9;
            transform: translateX(-50%);
        }
        .flow-item {
            position: relative;
            z-index: 1;
        }
        .flow-connector-vertical::after {
            content: '';
            position: absolute;
            left: 50%;
            top: 100%;
            width: 2px;
            height: 2rem;
            background-color: #415A77;
            transform: translateX(-50%);
        }
    </style>
</head>
<body class="text-[#0D1B2A]">

    <header class="bg-[#1B263B] text-white py-12 md:py-20 text-center relative">
        <h1 id="header-title" class="text-4xl md:text-6xl font-black tracking-tight text-shadow">æ—¥æœ¬ã®é»æ˜</h1>
        <p id="header-subtitle" class="text-xl md:text-2xl mt-4 font-light text-[#E0E1DD]">å¾ç¥è©±åˆ°åœ‹å®¶ï¼šä¸€æ®µè·¨è¶Šè¬å¹´çš„æ¼”é€²å²è©©</p>
        <button id="lang-switcher" class="absolute top-4 right-4 bg-[#778DA9] hover:bg-[#415A77] text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300">English</button>
    </header>

    <main class="container mx-auto p-4 md:p-8">
        
        <section id="mythology" class="mb-12">
            <div class="bg-white rounded-lg shadow-xl p-6 md:p-8">
                <h2 id="myth-title" class="text-3xl font-bold text-[#0D1B2A] mb-4">ç¬¬ä¸€ç« ï¼šç¥è©±çš„å‰µä¸–ç´€</h2>
                <p id="myth-p1" class="text-lg text-[#415A77] mb-6">æ—¥æœ¬çš„åœ‹å®¶èµ·æºæ•…äº‹å§‹æ–¼8ä¸–ç´€ç·¨çº‚çš„ã€Šå¤äº‹è¨˜ã€‹èˆ‡ã€Šæ—¥æœ¬æ›¸ç´€ã€‹ã€‚é€™ä¸åƒ…æ˜¯å‚³èªªï¼Œæ›´æ˜¯ä¸€é …ç‚ºéå›ºå¤©çš‡çµ±æ²»æ¬Šå¨è€Œç²¾å¿ƒæ§‹å»ºçš„æ”¿æ²»å·¥ç¨‹ï¼Œå°‡çš‡æ¬Šèˆ‡å®‡å®™å‰µç”Ÿçš„ç¥è–æ€§ç·Šå¯†ç›¸é€£ã€‚</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 id="myth-h3-1" class="text-2xl font-semibold mb-4 text-center">ç¥è–çš„çµ±æ²»è­œç³»</h3>
                        <p id="myth-p2" class="text-[#415A77] mb-6 text-center">å¾å‰µä¸–ç¥åˆ°ç¬¬ä¸€ä»£å¤©çš‡ï¼Œç¥è©±å»ºç«‹äº†ä¸€æ¢ä¸å®¹ç½®ç–‘çš„è¡€ç·£éˆæ¢ï¼Œç‚ºå¤§å’Œæ”¿æ¬Šçš„çµ±æ²»æä¾›äº†ç¥å­¸ä¸Šçš„æ­£ç•¶æ€§ã€‚</p>
                        <div class="flex flex-col items-center space-y-4">
                            <div class="flow-item bg-[#778DA9] text-white p-3 rounded-lg shadow-md w-4/5 text-center flow-connector-vertical"><strong id="myth-god1-name">ä¼Šå¥˜è«¾å°Š & ä¼Šå¥˜å†‰å°Š</strong><br><span id="myth-god1-desc" class="text-sm">åœ‹åœŸèˆ‡çœ¾ç¥ä¹‹å‰µé€ è€…</span></div>
                            <div class="flow-item bg-[#415A77] text-white p-4 rounded-lg shadow-lg w-4/5 text-center flow-connector-vertical"><strong id="myth-god2-name">å¤©ç…§å¤§ç¥ (å¤ªé™½å¥³ç¥)</strong><br><span id="myth-god2-desc" class="text-sm">é«˜å¤©åŸçš„çµ±æ²»è€…</span></div>
                            <div class="flow-item bg-[#1B263B] text-white p-4 rounded-lg shadow-xl w-4/5 text-center"><strong id="myth-god3-name">å¤©çš‡å®¶æ—</strong><br><span id="myth-god3-desc" class="text-sm">å¤©ç…§å¤§ç¥åœ¨äººé–“çš„å¾Œè£”</span></div>
                        </div>
                    </div>
                    <div class="text-center">
                        <div class="bg-[#415A77] text-white rounded-full w-48 h-48 md:w-64 md:h-64 mx-auto flex flex-col justify-center items-center shadow-2xl">
                            <span class="text-6xl md:text-8xl font-black">8</span>
                            <span id="myth-century-unit" class="text-lg md:text-xl font-bold">ä¸–ç´€</span>
                            <span id="myth-century-desc" class="mt-2 text-md md:text-lg">ã€Œè¨˜ç´€ã€ç¥è©±çš„æˆæ›¸å¹´ä»£</span>
                        </div>
                        <p id="myth-p3" class="mt-6 text-[#1B263B] text-lg">é€™äº›å²è©©çš„ç·¨çº‚ï¼Œæ˜¯æ–°ç”Ÿä¸­å¤®é›†æ¬Šåœ‹å®¶å¥ å®šå…¶æ„è­˜å½¢æ…‹åŸºçŸ³çš„é—œéµä¸€æ­¥ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="jomon" class="mb-12">
            <div class="bg-white rounded-lg shadow-xl p-6 md:p-8">
                <h2 id="jomon-title" class="text-3xl font-bold text-[#0D1B2A] mb-4">ç¬¬äºŒç« ï¼šç¹©æ–‡æ™‚ä»£çš„è¬å¹´åŸºçŸ³</h2>
                <p id="jomon-p1" class="text-lg text-[#415A77] mb-6">åœ¨ç¥è©±ä¹‹å‰ï¼Œæ˜¯é•·é”è¬é¤˜å¹´çš„ç¹©æ–‡æ™‚ä»£ã€‚é€™æ®µæ™‚æœŸçš„äººå€‘æ†‘è—‰ç¨å‰µçš„æŠ€è¡“èˆ‡æ™ºæ…§ï¼Œåœ¨æ²’æœ‰è¾²æ¥­çš„æƒ…æ³ä¸‹å¯¦ç¾äº†è¤‡é›œçš„å®šå±…ç”Ÿæ´»ï¼Œå¥ å®šäº†æ—¥æœ¬æ–‡åŒ–çš„æ·±åšæœ¬åœŸåŸºç¤ã€‚</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                     <div class="text-center">
                        <div class="bg-[#415A77] text-white rounded-lg p-6 shadow-xl">
                            <div class="text-6xl font-black">14,000+</div>
                            <div id="jomon-years-unit" class="text-xl font-bold mt-2">å¹´</div>
                            <p id="jomon-years-desc" class="mt-2 text-lg">ç¹©æ–‡æ™‚ä»£çš„æŒçºŒæ™‚é–“</p>
                        </div>
                        <div class="mt-6 flex justify-center space-x-8 text-6xl text-[#1B263B]">
                           <div class="text-center"><span title="ç¹©æ–‡åœŸå™¨">ğŸº</span><p id="jomon-icon1" class="text-sm mt-2">é™¶å™¨é©å‘½</p></div>
                           <div class="text-center"><span title="åœŸå¶">ğŸ—¿</span><p id="jomon-icon2" class="text-sm mt-2">ç²¾ç¥ä¸–ç•Œ</p></div>
                           <div class="text-center"><span title="ç‹©çµå·¥å…·">ğŸ¹</span><p id="jomon-icon3" class="text-sm mt-2">é«˜æ•ˆç‹©çµ</p></div>
                        </div>
                     </div>
                    <div>
                        <h3 id="jomon-h3-1" class="text-2xl font-semibold mb-4 text-center">éè¾²æ¥­çš„å¯Œé¥’ç¶“æ¿Ÿ</h3>
                        <p id="jomon-p2" class="text-[#415A77] mb-4 text-center">ç¹©æ–‡äººç²¾å¦™åœ°åˆ©ç”¨äº†è±å¯Œçš„è‡ªç„¶è³‡æºï¼Œå…¶ç¶“æ¿Ÿç”±ç‹©çµã€æ¼æ’ˆå’Œæ¡é›†ä¸‰éƒ¨åˆ†å‡è¡¡æ§‹æˆï¼Œæ”¯æ’äº†é•·æœŸçš„å®šå±…ç¤¾æœƒã€‚</p>
                        <div class="chart-container">
                            <canvas id="jomonEconomyChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="yayoi" class="mb-12">
            <div class="bg-white rounded-lg shadow-xl p-6 md:p-8">
                <h2 id="yayoi-title" class="text-3xl font-bold text-[#0D1B2A] mb-4">ç¬¬ä¸‰ç« ï¼šå½Œç”Ÿæ™‚ä»£çš„è¾²æ¥­é©å‘½</h2>
                <p id="yayoi-p1" class="text-lg text-[#415A77] mb-6">ç´„å…¬å…ƒå‰300å¹´ï¼Œä¾†è‡ªå¤§é™¸çš„æ°´ç¨»ç¨®æ¤èˆ‡é‡‘å±¬å™¨æŠ€è¡“å¼•ç™¼äº†ä¸€å ´æ·±åˆ»çš„ç¤¾æœƒé©å‘½ã€‚å‰©é¤˜è²¡å¯Œçš„å‡ºç¾æ‰“ç ´äº†éå»çš„å¹³ç­‰ï¼Œå‚¬ç”Ÿäº†éšç´šã€è²¡ç”¢ï¼Œä»¥åŠç‚ºçˆ­å¥ªè³‡æºè€Œçˆ†ç™¼çš„æˆ°çˆ­ã€‚</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 id="yayoi-h3-1" class="text-2xl font-semibold mb-4 text-center">ç¤¾æœƒçµæ§‹çš„åŠ‡è®Š</h3>
                        <p id="yayoi-p2" class="text-[#415A77] mb-4 text-center">æ°´ç¨»è¾²æ¥­å¸¶ä¾†çš„å‰©é¤˜ç³§é£Ÿï¼Œæ˜¯ç¤¾æœƒåˆ†åŒ–çš„å‚¬åŒ–åŠ‘ï¼Œå¾ç›¸å°å¹³ç­‰çš„ç¹©æ–‡ç¤¾æœƒè½‰è®Šç‚ºéšç´šåˆ†æ˜çš„å½Œç”Ÿç¤¾æœƒã€‚</p>
                         <div class="chart-container">
                            <canvas id="socialStructureChart"></canvas>
                        </div>
                    </div>
                    <div class="text-center">
                        <h3 id="yayoi-h3-2" class="text-2xl font-semibold mb-4">è®Šé©çš„å¼•æ“</h3>
                        <div class="flex flex-col items-center space-y-4">
                            <div class="flow-item bg-[#778DA9] text-white p-3 rounded-lg shadow-md w-4/5 text-center flow-connector-vertical"><strong id="yayoi-flow1-title">å¤§é™¸å‚³å…¥</strong><br><span id="yayoi-flow1-desc" class="text-sm">(ç¶“æœé®®åŠå³¶)</span></div>
                            <div class="flex space-x-4 w-full justify-center">
                               <div class="bg-[#415A77] text-white p-4 rounded-lg shadow-lg w-2/5 text-center"><strong id="yayoi-flow2a-title">æ°´ç¨»ç¨®æ¤ ğŸŒ¾</strong><br><span id="yayoi-flow2a-desc" class="text-sm">å‰©é¤˜è²¡å¯Œ</span></div>
                               <div class="bg-[#415A77] text-white p-4 rounded-lg shadow-lg w-2/5 text-center"><strong id="yayoi-flow2b-title">é‡‘å±¬å™¨ âš”ï¸</strong><br><span id="yayoi-flow2b-desc" class="text-sm">ç”Ÿç”¢åŠ›/è»äº‹åŠ›</span></div>
                            </div>
                            <div id="yayoi-flow3" class="flow-item bg-[#1B263B] text-white p-4 rounded-lg shadow-xl w-4/5 text-center mt-4"><strong>éšç´šã€æˆ°çˆ­èˆ‡ã€Œåœ‹ã€çš„å½¢æˆ</strong></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="kofun" class="mb-12">
            <div class="bg-white rounded-lg shadow-xl p-6 md:p-8">
                <h2 id="kofun-title" class="text-3xl font-bold text-[#0D1B2A] mb-4">ç¬¬å››ç« ï¼šå¤å¢³æ™‚ä»£çš„æ¬ŠåŠ›éå›º</h2>
                <p id="kofun-p1" class="text-lg text-[#415A77] mb-6">å½Œç”Ÿæ™‚ä»£çš„å‹•ç›ªå‚¬ç”Ÿäº†æ—¥æœ¬ç¬¬ä¸€å€‹çµ±ä¸€æ”¿æ¬Šâ€”â€”å¤§å’Œæ”¿æ¬Šã€‚çµ±æ²»è€…å€‘é€šéå»ºé€ å·¨å¤§å¤å¢³ï¼ˆç‰¹åˆ¥æ˜¯å‰æ–¹å¾Œåœ“å¢³ï¼‰ä¾†å±•ç¤ºå…¶è‡³é«˜ç„¡ä¸Šçš„æ¬ŠåŠ›ï¼Œä¸¦å°‡å…¶å½±éŸ¿åŠ›æ“´å±•è‡³å…¨åœ‹ã€‚</p>
                <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
                    <div class="lg:col-span-3">
                        <h3 id="kofun-h3-1" class="text-2xl font-semibold mb-4 text-center">æ¬ŠåŠ›çš„å°ºåº¦ï¼šå·¨å¤§å¤å¢³çš„æ¯”è¼ƒ</h3>
                        <p id="kofun-p2" class="text-[#415A77] mb-4 text-center">å¤§å’Œæ”¿æ¬Šå¤§ç‹çš„é™µå¢“è¦æ¨¡å®å¤§ï¼Œå¦‚ä»å¾·å¤©çš‡é™µå¤å¢³ï¼ˆå¤§ä»™é™µå¤å¢³ï¼‰ï¼Œå…¶é•·åº¦è¶…è¶Šäº†è¨±å¤šä¸–ç•ŒçŸ¥åçš„å¤ä»£å»ºç¯‰ï¼Œå½°é¡¯äº†ç‹æ¬Šçš„çµ•å°æ€§ã€‚</p>
                        <div class="chart-container h-96 md:h-[500px]">
                            <canvas id="kofunSizeChart"></canvas>
                        </div>
                    </div>
                    <div class="lg:col-span-2 flex flex-col justify-center">
                        <h3 id="kofun-h3-2" class="text-2xl font-semibold mb-4 text-center">åœ‹å®¶å»ºè¨­çš„æŠ€è¡“å¼•æ“</h3>
                        <p id="kofun-p3" class="text-[#415A77] mb-6 text-center">è¢«ç¨±ç‚ºã€Œæ¸¡ä¾†äººã€çš„å¤§é™¸ç§»æ°‘å¸¶ä¾†äº†å…ˆé€²æŠ€è¡“èˆ‡æ–‡åŒ–ï¼Œæ¥µå¤§åœ°æ¨å‹•äº†åœ‹å®¶çš„ç™¼å±•ã€‚</p>
                        <div class="space-y-3">
                            <div class="bg-gray-100 border-l-4 border-[#415A77] p-4 rounded">
                                <h4 id="kofun-tech1-title" class="font-bold">å†¶é‡‘èˆ‡é™¶å™¨</h4>
                                <p id="kofun-tech1-desc" class="text-sm">é«˜æ•ˆçš„ç…‰éµæŠ€è¡“èˆ‡å …ç¡¬çš„é ˆæƒ å™¨ã€‚</p>
                            </div>
                             <div class="bg-gray-100 border-l-4 border-[#415A77] p-4 rounded">
                                <h4 id="kofun-tech2-title" class="font-bold">ç´¡ç¹”èˆ‡å·¥è—</h4>
                                <p id="kofun-tech2-desc" class="text-sm">è¯éº—çš„çµ²ç¹”å“èˆ‡é¦¬å…·è£½é€ æŠ€è¡“ã€‚</p>
                            </div>
                             <div class="bg-gray-100 border-l-4 border-[#415A77] p-4 rounded">
                                <h4 id="kofun-tech3-title" class="font-bold">æ–‡å­—èˆ‡æ€æƒ³</h4>
                                <p id="kofun-tech3-desc" class="text-sm">æ¼¢å­—ã€å„’å­¸èˆ‡ä½›æ•™çš„å‚³å…¥ï¼Œç‚ºå®˜åƒšåˆ¶åº¦æä¾›äº†åŸºç¤ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="ritsuryo" class="mb-12">
            <div class="bg-white rounded-lg shadow-xl p-6 md:p-8">
                <h2 id="ritsuryo-title" class="text-3xl font-bold text-[#0D1B2A] mb-4">ç¬¬äº”ç« ï¼šå¾‹ä»¤åœ‹å®¶çš„æœ€çµ‚å¡‘é€ </h2>
                <p id="ritsuryo-p1" class="text-lg text-[#415A77] mb-6">å¾é£›é³¥æ™‚ä»£åˆ°å¥ˆè‰¯æ™‚ä»£ï¼Œæ—¥æœ¬ç²¾è‹±éšå±¤ä»¥å¼·ç››çš„å”æœç‚ºè—æœ¬ï¼Œé€šéä¸€ç³»åˆ—æ”¹é©ï¼Œç³»çµ±æ€§åœ°å¼•é€²å¤§é™¸çš„æ³•å¾‹ã€åˆ¶åº¦èˆ‡æ€æƒ³ï¼Œæœ€çµ‚å®Œæˆäº†å¾æ°æ—è¯ç›Ÿå‘ä¸­å¤®é›†æ¬Šçš„ã€Œå¾‹ä»¤åœ‹å®¶ã€çš„è½‰è®Šã€‚</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 id="ritsuryo-h3-1" class="text-2xl font-semibold mb-4 text-center">é€šå¾€ä¸­å¤®é›†æ¬Šä¹‹è·¯</h3>
                        <div class="relative p-8">
                            <div class="flow-line"></div>
                            <div class="flow-item mb-8 flex items-center">
                                <div class="bg-[#778DA9] text-white w-16 h-16 rounded-full flex items-center justify-center font-bold text-xl shadow-md">1</div>
                                <div class="ml-4">
                                    <h4 id="ritsuryo-step1-title" class="font-bold">è–å¾·å¤ªå­æ”¹é© (7ä¸–ç´€åˆ)</h4>
                                    <p id="ritsuryo-step1-desc" class="text-sm">æ¨è¡Œå† ä½åäºŒéšèˆ‡åä¸ƒæ¢æ†²æ³•ï¼Œå˜—è©¦æ‰“ç ´æ°æ—å£Ÿæ–·ã€‚</p>
                                </div>
                            </div>
                            <div class="flow-item mb-8 flex items-center">
                                <div class="bg-[#415A77] text-white w-16 h-16 rounded-full flex items-center justify-center font-bold text-xl shadow-md">2</div>
                                <div class="ml-4">
                                    <h4 id="ritsuryo-step2-title" class="font-bold">å¤§åŒ–é©æ–° (645å¹´)</h4>
                                    <p id="ritsuryo-step2-desc" class="text-sm">æ¨è¡Œå…¬åœ°å…¬æ°‘åˆ¶ï¼Œå»ºç«‹åœ‹å®¶å°åœŸåœ°èˆ‡äººæ°‘çš„ç›´æ¥æ§åˆ¶ã€‚</p>
                                </div>
                            </div>
                            <div class="flow-item flex items-center">
                                <div class="bg-[#1B263B] text-white w-16 h-16 rounded-full flex items-center justify-center font-bold text-xl shadow-md">3</div>
                                <div class="ml-4">
                                    <h4 id="ritsuryo-step3-title" class="font-bold">ã€Šå¤§å¯¶å¾‹ä»¤ã€‹é ’å¸ƒ (701å¹´)</h4>
                                    <p id="ritsuryo-step3-desc" class="text-sm">å¾‹ä»¤åœ‹å®¶é«”åˆ¶ç¢ºç«‹ï¼Œæ¨™èªŒè‘—å¤ä»£ä¸­å¤®é›†æ¬Šåœ‹å®¶çš„å®Œæˆã€‚</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h3 id="ritsuryo-h3-2" class="text-2xl font-semibold mb-4 text-center">åä¸ƒæ¢æ†²æ³•çš„æ€æƒ³åŸºçŸ³</h3>
                        <p id="ritsuryo-p2" class="text-[#415A77] mb-4 text-center">é€™éƒ¨å®˜åƒšæ†²ç« å·§å¦™èåˆäº†ä½›æ•™ã€å„’å®¶èˆ‡æ³•å®¶æ€æƒ³ï¼Œç‚ºæ–°å‹åœ‹å®¶å€«ç†å¥ å®šåŸºç¤ã€‚</p>
                         <div class="chart-container">
                            <canvas id="constitutionChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-[#0D1B2A] text-white text-center p-4">
        <p id="footer-text">è³‡è¨Šåœ–è¡¨æ ¹æ“šã€Šæ—¥æœ¬çš„é–‹ç«¯ï¼šå¾ç¥è©±å‰µä¸–åˆ°å¾‹ä»¤åœ‹å®¶çš„å½¢æˆã€‹å ±å‘Šè£½ä½œã€‚</p>
    </footer>

    <script>
        const translations = {
            zh: {
                "lang-switcher": "English",
                "header-title": "æ—¥æœ¬ã®é»æ˜",
                "header-subtitle": "å¾ç¥è©±åˆ°åœ‹å®¶ï¼šä¸€æ®µè·¨è¶Šè¬å¹´çš„æ¼”é€²å²è©©",
                "myth-title": "ç¬¬ä¸€ç« ï¼šç¥è©±çš„å‰µä¸–ç´€",
                "myth-p1": "æ—¥æœ¬çš„åœ‹å®¶èµ·æºæ•…äº‹å§‹æ–¼8ä¸–ç´€ç·¨çº‚çš„ã€Šå¤äº‹è¨˜ã€‹èˆ‡ã€Šæ—¥æœ¬æ›¸ç´€ã€‹ã€‚é€™ä¸åƒ…æ˜¯å‚³èªªï¼Œæ›´æ˜¯ä¸€é …ç‚ºéå›ºå¤©çš‡çµ±æ²»æ¬Šå¨è€Œç²¾å¿ƒæ§‹å»ºçš„æ”¿æ²»å·¥ç¨‹ï¼Œå°‡çš‡æ¬Šèˆ‡å®‡å®™å‰µç”Ÿçš„ç¥è–æ€§ç·Šå¯†ç›¸é€£ã€‚",
                "myth-h3-1": "ç¥è–çš„çµ±æ²»è­œç³»",
                "myth-p2": "å¾å‰µä¸–ç¥åˆ°ç¬¬ä¸€ä»£å¤©çš‡ï¼Œç¥è©±å»ºç«‹äº†ä¸€æ¢ä¸å®¹ç½®ç–‘çš„è¡€ç·£éˆæ¢ï¼Œç‚ºå¤§å’Œæ”¿æ¬Šçš„çµ±æ²»æä¾›äº†ç¥å­¸ä¸Šçš„æ­£ç•¶æ€§ã€‚",
                "myth-god1-name": "ä¼Šå¥˜è«¾å°Š & ä¼Šå¥˜å†‰å°Š",
                "myth-god1-desc": "åœ‹åœŸèˆ‡çœ¾ç¥ä¹‹å‰µé€ è€…",
                "myth-god2-name": "å¤©ç…§å¤§ç¥ (å¤ªé™½å¥³ç¥)",
                "myth-god2-desc": "é«˜å¤©åŸçš„çµ±æ²»è€…",
                "myth-god3-name": "å¤©çš‡å®¶æ—",
                "myth-god3-desc": "å¤©ç…§å¤§ç¥åœ¨äººé–“çš„å¾Œè£”",
                "myth-century-unit": "ä¸–ç´€",
                "myth-century-desc": "ã€Œè¨˜ç´€ã€ç¥è©±çš„æˆæ›¸å¹´ä»£",
                "myth-p3": "é€™äº›å²è©©çš„ç·¨çº‚ï¼Œæ˜¯æ–°ç”Ÿä¸­å¤®é›†æ¬Šåœ‹å®¶å¥ å®šå…¶æ„è­˜å½¢æ…‹åŸºçŸ³çš„é—œéµä¸€æ­¥ã€‚",
                "jomon-title": "ç¬¬äºŒç« ï¼šç¹©æ–‡æ™‚ä»£çš„è¬å¹´åŸºçŸ³",
                "jomon-p1": "åœ¨ç¥è©±ä¹‹å‰ï¼Œæ˜¯é•·é”è¬é¤˜å¹´çš„ç¹©æ–‡æ™‚ä»£ã€‚é€™æ®µæ™‚æœŸçš„äººå€‘æ†‘è—‰ç¨å‰µçš„æŠ€è¡“èˆ‡æ™ºæ…§ï¼Œåœ¨æ²’æœ‰è¾²æ¥­çš„æƒ…æ³ä¸‹å¯¦ç¾äº†è¤‡é›œçš„å®šå±…ç”Ÿæ´»ï¼Œå¥ å®šäº†æ—¥æœ¬æ–‡åŒ–çš„æ·±åšæœ¬åœŸåŸºç¤ã€‚",
                "jomon-years-unit": "å¹´",
                "jomon-years-desc": "ç¹©æ–‡æ™‚ä»£çš„æŒçºŒæ™‚é–“",
                "jomon-icon1": "é™¶å™¨é©å‘½",
                "jomon-icon2": "ç²¾ç¥ä¸–ç•Œ",
                "jomon-icon3": "é«˜æ•ˆç‹©çµ",
                "jomon-h3-1": "éè¾²æ¥­çš„å¯Œé¥’ç¶“æ¿Ÿ",
                "jomon-p2": "ç¹©æ–‡äººç²¾å¦™åœ°åˆ©ç”¨äº†è±å¯Œçš„è‡ªç„¶è³‡æºï¼Œå…¶ç¶“æ¿Ÿç”±ç‹©çµã€æ¼æ’ˆå’Œæ¡é›†ä¸‰éƒ¨åˆ†å‡è¡¡æ§‹æˆï¼Œæ”¯æ’äº†é•·æœŸçš„å®šå±…ç¤¾æœƒã€‚",
                "jomon-chart-label": "ç¹©æ–‡ç¶“æ¿Ÿæ§‹æˆ",
                "jomon-chart-labels": ['ç‹©çµ', 'æ¼æ’ˆ', 'æ¡é›†'],
                "yayoi-title": "ç¬¬ä¸‰ç« ï¼šå½Œç”Ÿæ™‚ä»£çš„è¾²æ¥­é©å‘½",
                "yayoi-p1": "ç´„å…¬å…ƒå‰300å¹´ï¼Œä¾†è‡ªå¤§é™¸çš„æ°´ç¨»ç¨®æ¤èˆ‡é‡‘å±¬å™¨æŠ€è¡“å¼•ç™¼äº†ä¸€å ´æ·±åˆ»çš„ç¤¾æœƒé©å‘½ã€‚å‰©é¤˜è²¡å¯Œçš„å‡ºç¾æ‰“ç ´äº†éå»çš„å¹³ç­‰ï¼Œå‚¬ç”Ÿäº†éšç´šã€è²¡ç”¢ï¼Œä»¥åŠç‚ºçˆ­å¥ªè³‡æºè€Œçˆ†ç™¼çš„æˆ°çˆ­ã€‚",
                "yayoi-h3-1": "ç¤¾æœƒçµæ§‹çš„åŠ‡è®Š",
                "yayoi-p2": "æ°´ç¨»è¾²æ¥­å¸¶ä¾†çš„å‰©é¤˜ç³§é£Ÿï¼Œæ˜¯ç¤¾æœƒåˆ†åŒ–çš„å‚¬åŒ–åŠ‘ï¼Œå¾ç›¸å°å¹³ç­‰çš„ç¹©æ–‡ç¤¾æœƒè½‰è®Šç‚ºéšç´šåˆ†æ˜çš„å½Œç”Ÿç¤¾æœƒã€‚",
                "yayoi-h3-2": "è®Šé©çš„å¼•æ“",
                "yayoi-flow1-title": "å¤§é™¸å‚³å…¥",
                "yayoi-flow1-desc": "(ç¶“æœé®®åŠå³¶)",
                "yayoi-flow2a-title": "æ°´ç¨»ç¨®æ¤ ğŸŒ¾",
                "yayoi-flow2a-desc": "å‰©é¤˜è²¡å¯Œ",
                "yayoi-flow2b-title": "é‡‘å±¬å™¨ âš”ï¸",
                "yayoi-flow2b-desc": "ç”Ÿç”¢åŠ›/è»äº‹åŠ›",
                "yayoi-flow3": "<strong>éšç´šã€æˆ°çˆ­èˆ‡ã€Œåœ‹ã€çš„å½¢æˆ</strong>",
                "social-chart-labels": ['ç¹©æ–‡æ™‚ä»£', 'å½Œç”Ÿæ™‚ä»£'],
                "social-chart-dataset1": "çµ±æ²»/ç¥­å¸éšç´š",
                "social-chart-dataset2": "æ™®é€šè¾²æ°‘/æ°‘è¡†",
                "social-chart-dataset3": "å¥´éš¸/å¾å±¬éšç´š",
                "kofun-title": "ç¬¬å››ç« ï¼šå¤å¢³æ™‚ä»£çš„æ¬ŠåŠ›éå›º",
                "kofun-p1": "å½Œç”Ÿæ™‚ä»£çš„å‹•ç›ªå‚¬ç”Ÿäº†æ—¥æœ¬ç¬¬ä¸€å€‹çµ±ä¸€æ”¿æ¬Šâ€”â€”å¤§å’Œæ”¿æ¬Šã€‚çµ±æ²»è€…å€‘é€šéå»ºé€ å·¨å¤§å¤å¢³ï¼ˆç‰¹åˆ¥æ˜¯å‰æ–¹å¾Œåœ“å¢³ï¼‰ä¾†å±•ç¤ºå…¶è‡³é«˜ç„¡ä¸Šçš„æ¬ŠåŠ›ï¼Œä¸¦å°‡å…¶å½±éŸ¿åŠ›æ“´å±•è‡³å…¨åœ‹ã€‚",
                "kofun-h3-1": "æ¬ŠåŠ›çš„å°ºåº¦ï¼šå·¨å¤§å¤å¢³çš„æ¯”è¼ƒ",
                "kofun-p2": "å¤§å’Œæ”¿æ¬Šå¤§ç‹çš„é™µå¢“è¦æ¨¡å®å¤§ï¼Œå¦‚ä»å¾·å¤©çš‡é™µå¤å¢³ï¼ˆå¤§ä»™é™µå¤å¢³ï¼‰ï¼Œå…¶é•·åº¦è¶…è¶Šäº†è¨±å¤šä¸–ç•ŒçŸ¥åçš„å¤ä»£å»ºç¯‰ï¼Œå½°é¡¯äº†ç‹æ¬Šçš„çµ•å°æ€§ã€‚",
                "kofun-h3-2": "åœ‹å®¶å»ºè¨­çš„æŠ€è¡“å¼•æ“",
                "kofun-p3": "è¢«ç¨±ç‚ºã€Œæ¸¡ä¾†äººã€çš„å¤§é™¸ç§»æ°‘å¸¶ä¾†äº†å…ˆé€²æŠ€è¡“èˆ‡æ–‡åŒ–ï¼Œæ¥µå¤§åœ°æ¨å‹•äº†åœ‹å®¶çš„ç™¼å±•ã€‚",
                "kofun-tech1-title": "å†¶é‡‘èˆ‡é™¶å™¨",
                "kofun-tech1-desc": "é«˜æ•ˆçš„ç…‰éµæŠ€è¡“èˆ‡å …ç¡¬çš„é ˆæƒ å™¨ã€‚",
                "kofun-tech2-title": "ç´¡ç¹”èˆ‡å·¥è—",
                "kofun-tech2-desc": "è¯éº—çš„çµ²ç¹”å“èˆ‡é¦¬å…·è£½é€ æŠ€è¡“ã€‚",
                "kofun-tech3-title": "æ–‡å­—èˆ‡æ€æƒ³",
                "kofun-tech3-desc": "æ¼¢å­—ã€å„’å­¸èˆ‡ä½›æ•™çš„å‚³å…¥ï¼Œç‚ºå®˜åƒšåˆ¶åº¦æä¾›äº†åŸºç¤ã€‚",
                "kofun-chart-label": "ç¸½é•·åº¦ (ç±³)",
                "kofun-chart-labels": ['ä»å¾·å¤©çš‡é™µå¤å¢³ (å¤§ä»™é™µ)', 'æ‡‰ç¥å¤©çš‡é™µå¤å¢³', 'åŸƒåŠå‰è–©å¤§é‡‘å­—å¡”', 'ä½œå±±å¤å¢³', 'ç§¦å§‹çš‡é™µ (å°åœŸå †)'],
                "ritsuryo-title": "ç¬¬äº”ç« ï¼šå¾‹ä»¤åœ‹å®¶çš„æœ€çµ‚å¡‘é€ ",
                "ritsuryo-p1": "å¾é£›é³¥æ™‚ä»£åˆ°å¥ˆè‰¯æ™‚ä»£ï¼Œæ—¥æœ¬ç²¾è‹±éšå±¤ä»¥å¼·ç››çš„å”æœç‚ºè—æœ¬ï¼Œé€šéä¸€ç³»åˆ—æ”¹é©ï¼Œç³»çµ±æ€§åœ°å¼•é€²å¤§é™¸çš„æ³•å¾‹ã€åˆ¶åº¦èˆ‡æ€æƒ³ï¼Œæœ€çµ‚å®Œæˆäº†å¾æ°æ—è¯ç›Ÿå‘ä¸­å¤®é›†æ¬Šçš„ã€Œå¾‹ä»¤åœ‹å®¶ã€çš„è½‰è®Šã€‚",
                "ritsuryo-h3-1": "é€šå¾€ä¸­å¤®é›†æ¬Šä¹‹è·¯",
                "ritsuryo-step1-title": "è–å¾·å¤ªå­æ”¹é© (7ä¸–ç´€åˆ)",
                "ritsuryo-step1-desc": "æ¨è¡Œå† ä½åäºŒéšèˆ‡åä¸ƒæ¢æ†²æ³•ï¼Œå˜—è©¦æ‰“ç ´æ°æ—å£Ÿæ–·ã€‚",
                "ritsuryo-step2-title": "å¤§åŒ–é©æ–° (645å¹´)",
                "ritsuryo-step2-desc": "æ¨è¡Œå…¬åœ°å…¬æ°‘åˆ¶ï¼Œå»ºç«‹åœ‹å®¶å°åœŸåœ°èˆ‡äººæ°‘çš„ç›´æ¥æ§åˆ¶ã€‚",
                "ritsuryo-step3-title": "ã€Šå¤§å¯¶å¾‹ä»¤ã€‹é ’å¸ƒ (701å¹´)",
                "ritsuryo-step3-desc": "å¾‹ä»¤åœ‹å®¶é«”åˆ¶ç¢ºç«‹ï¼Œæ¨™èªŒè‘—å¤ä»£ä¸­å¤®é›†æ¬Šåœ‹å®¶çš„å®Œæˆã€‚",
                "ritsuryo-h3-2": "åä¸ƒæ¢æ†²æ³•çš„æ€æƒ³åŸºçŸ³",
                "ritsuryo-p2": "é€™éƒ¨å®˜åƒšæ†²ç« å·§å¦™èåˆäº†ä½›æ•™ã€å„’å®¶èˆ‡æ³•å®¶æ€æƒ³ï¼Œç‚ºæ–°å‹åœ‹å®¶å€«ç†å¥ å®šåŸºç¤ã€‚",
                "constitution-chart-label": "æ€æƒ³ä¾†æº",
                "constitution-chart-labels": ['å„’å®¶æ€æƒ³ (å’Œã€ç¦®ã€ä¿¡)', 'ä½›æ•™æ€æƒ³ (æ•¬ä¸‰å¯¶)', 'æ³•å®¶æ€æƒ³ (è³ç½°åˆ†æ˜)'],
                "footer-text": "è³‡è¨Šåœ–è¡¨æ ¹æ“šã€Šæ—¥æœ¬çš„é–‹ç«¯ï¼šå¾ç¥è©±å‰µä¸–åˆ°å¾‹ä»¤åœ‹å®¶çš„å½¢æˆã€‹å ±å‘Šè£½ä½œã€‚"
            },
            en: {
                "lang-switcher": "ä¸­æ–‡",
                "header-title": "The Dawn of Japan",
                "header-subtitle": "From Mythology to Nation: An Epic of Millennia",
                "myth-title": "Chapter 1: The Genesis of Mythology",
                "myth-p1": "Japan's national origin story begins with the 8th-century Kojiki and Nihon Shoki. More than legend, this was a political project crafted to solidify the emperor's authority, linking imperial power to the sanctity of cosmic creation.",
                "myth-h3-1": "The Divine Lineage of Rule",
                "myth-p2": "From creator gods to the first emperor, mythology established an unbreakable bloodline, providing theological legitimacy for the Yamato regime's rule.",
                "myth-god1-name": "Izanagi & Izanami",
                "myth-god1-desc": "Creators of the Land and Gods",
                "myth-god2-name": "Amaterasu (Sun Goddess)",
                "myth-god2-desc": "Ruler of the High Celestial Plain",
                "myth-god3-name": "The Imperial Family",
                "myth-god3-desc": "Earthly Descendants of Amaterasu",
                "myth-century-unit": "Century",
                "myth-century-desc": "Compilation of 'Kiki' Mythology",
                "myth-p3": "The compilation of these epics was a key step for the nascent centralized state to lay its ideological cornerstone.",
                "jomon-title": "Chapter 2: The Millennial Foundation of the JÅmon Period",
                "jomon-p1": "Before the myths lay the JÅmon period, spanning over ten thousand years. People of this era achieved complex settled life without agriculture, relying on unique technologies and wisdom, laying a deep indigenous foundation for Japanese culture.",
                "jomon-years-unit": "Years",
                "jomon-years-desc": "Duration of the JÅmon Period",
                "jomon-icon1": "Pottery Revolution",
                "jomon-icon2": "Spiritual World",
                "jomon-icon3": "Efficient Hunting",
                "jomon-h3-1": "A Prosperous Non-Agricultural Economy",
                "jomon-p2": "The JÅmon people skillfully utilized rich natural resources. Their economy was a balanced composition of hunting, fishing, and gathering, supporting long-term settled societies.",
                "jomon-chart-label": "JÅmon Economy Composition",
                "jomon-chart-labels": ['Hunting', 'Fishing', 'Gathering'],
                "yayoi-title": "Chapter 3: The Agricultural Revolution of the Yayoi Period",
                "yayoi-p1": "Around 300 BCE, rice cultivation and metalworking from the continent triggered a profound social revolution. The emergence of surplus wealth shattered past equality, giving rise to classes, property, and wars for resources.",
                "yayoi-h3-1": "Drastic Shift in Social Structure",
                "yayoi-p2": "Surplus grain from rice farming was the catalyst for social differentiation, transforming the relatively egalitarian JÅmon society into a class-divided Yayoi society.",
                "yayoi-h3-2": "Engines of Change",
                "yayoi-flow1-title": "Continental Introduction",
                "yayoi-flow1-desc": "(via Korean Peninsula)",
                "yayoi-flow2a-title": "Rice Cultivation ğŸŒ¾",
                "yayoi-flow2a-desc": "Surplus Wealth",
                "yayoi-flow2b-title": "Metal Tools âš”ï¸",
                "yayoi-flow2b-desc": "Productivity / Military Power",
                "yayoi-flow3": "<strong>Formation of Class, War, and 'States'</strong>",
                "social-chart-labels": ['JÅmon Period', 'Yayoi Period'],
                "social-chart-dataset1": "Ruling/Priestly Class",
                "social-chart-dataset2": "Common Farmers/People",
                "social-chart-dataset3": "Slaves/Subordinate Class",
                "kofun-title": "Chapter 4: Power Consolidation in the Kofun Period",
                "kofun-p1": "The turmoil of the Yayoi period gave rise to Japan's first unified polityâ€”the Yamato regime. Rulers demonstrated their supreme power by building giant burial mounds (kofun), especially keyhole-shaped ones, extending their influence nationwide.",
                "kofun-h3-1": "The Scale of Power: A Comparison of Giant Kofun",
                "kofun-p2": "The tombs of Yamato kings, like the DaisenryÅ Kofun (Tomb of Emperor Nintoku), surpassed many world-famous ancient structures in length, showcasing the absolute nature of royal authority.",
                "kofun-h3-2": "Technological Engines of State Building",
                "kofun-p3": "Continental immigrants known as 'Toraijin' brought advanced technology and culture, greatly promoting the nation's development.",
                "kofun-tech1-title": "Metallurgy & Pottery",
                "kofun-tech1-desc": "Efficient iron-making techniques and hard Sue ware.",
                "kofun-tech2-title": "Textiles & Crafts",
                "kofun-tech2-desc": "Ornate silk fabrics and horse tack manufacturing.",
                "kofun-tech3-title": "Writing & Ideology",
                "kofun-tech3-desc": "The introduction of Chinese characters, Confucianism, and Buddhism provided the basis for a bureaucracy.",
                "kofun-chart-label": "Total Length (meters)",
                "kofun-chart-labels": ['DaisenryÅ Kofun (Nintoku Tomb)', 'OjinryÅ Kofun', 'Great Pyramid of Giza', 'Tsukuriyama Kofun', 'Mausoleum of Qin Shi Huang (mound)'],
                "ritsuryo-title": "Chapter 5: The Final Shaping of the RitsuryÅ State",
                "ritsuryo-p1": "From the Asuka to the Nara period, Japan's elite systematically adopted continental laws, institutions, and ideas, modeling their state on the powerful Tang Dynasty. This completed the transformation from a clan confederation to a centralized 'RitsuryÅ State'.",
                "ritsuryo-h3-1": "The Path to Centralization",
                "ritsuryo-step1-title": "Prince ShÅtoku's Reforms (Early 7th C.)",
                "ritsuryo-step1-desc": "Introduced the Twelve Level Cap and Rank System and the Seventeen-Article Constitution to break the clan monopoly.",
                "ritsuryo-step2-title": "Taika Reform (645 CE)",
                "ritsuryo-step2-desc": "Implemented the 'KÅchi KÅmin' system, establishing state control over land and people.",
                "ritsuryo-step3-title": "Enactment of the TaihÅ Code (701 CE)",
                "ritsuryo-step3-desc": "The RitsuryÅ state system was established, marking the completion of the ancient centralized state.",
                "ritsuryo-h3-2": "Ideological Foundation of the 17-Article Constitution",
                "ritsuryo-p2": "This bureaucratic charter skillfully blended Buddhist, Confucian, and Legalist ideas to establish a new state ethic.",
                "constitution-chart-label": "Ideological Sources",
                "constitution-chart-labels": ['Confucianism (Harmony, Propriety, Trust)', 'Buddhism (Reverence for the Three Treasures)', 'Legalism (Clear Rewards & Punishments)'],
                "footer-text": "Infographic based on the report 'The Dawn of Japan: From Mythical Creation to the RitsuryÅ State'."
            }
        };

        let currentLanguage = 'zh';
        let jomonEconomyChart, socialStructureChart, kofunSizeChart, constitutionChart;

        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
                return label.join(' ');
            } else {
                return label;
            }
        };

        const chartDefaultOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    labels: {
                        color: '#0D1B2A',
                        font: {
                            family: "'Roboto', 'Noto Sans TC', sans-serif",
                            size: 14
                        }
                    }
                },
                tooltip: {
                    callbacks: {
                        title: tooltipTitleCallback
                    },
                    titleFont: {
                        family: "'Roboto', 'Noto Sans TC', sans-serif",
                    },
                    bodyFont: {
                        family: "'Roboto', 'Noto Sans TC', sans-serif",
                    }
                }
            }
        };

        const chartColors = ['#415A77', '#778DA9', '#1B263B', '#E0E1DD'];

        const wrapLabel = (str, maxWidth) => {
            if (str.length <= maxWidth) return str;
            let wrapped = [];
            let words = str.split(' ');
            let currentLine = '';
            for (let word of words) {
                if ((currentLine + word).length > maxWidth) {
                    wrapped.push(currentLine.trim());
                    currentLine = '';
                }
                currentLine += word + ' ';
            }
            wrapped.push(currentLine.trim());
            return wrapped.filter(line => line.length > 0);
        };

        function initializeCharts() {
            const langData = translations[currentLanguage];

            jomonEconomyChart = new Chart(document.getElementById('jomonEconomyChart'), {
                type: 'doughnut',
                data: {
                    labels: langData['jomon-chart-labels'],
                    datasets: [{
                        label: langData['jomon-chart-label'],
                        data: [35, 35, 30],
                        backgroundColor: chartColors,
                        borderColor: '#FFFFFF',
                        borderWidth: 2
                    }]
                },
                options: { ...chartDefaultOptions }
            });

            socialStructureChart = new Chart(document.getElementById('socialStructureChart'), {
                type: 'bar',
                data: {
                    labels: langData['social-chart-labels'],
                    datasets: [
                        { label: langData['social-chart-dataset1'], data: [0, 15], backgroundColor: '#1B263B' },
                        { label: langData['social-chart-dataset2'], data: [100, 75], backgroundColor: '#415A77' },
                        { label: langData['social-chart-dataset3'], data: [0, 10], backgroundColor: '#778DA9' }
                    ]
                },
                options: { ...chartDefaultOptions, scales: { x: { stacked: true, ticks: { color: '#0D1B2A' } }, y: { stacked: true, ticks: { color: '#0D1B2A', callback: (value) => value + '%' } } } }
            });

            kofunSizeChart = new Chart(document.getElementById('kofunSizeChart'), {
                type: 'bar',
                data: {
                    labels: langData['kofun-chart-labels'].map(label => wrapLabel(label, currentLanguage === 'en' ? 25 : 16)),
                    datasets: [{
                        label: langData['kofun-chart-label'],
                        data: [486, 425, 230, 286, 350],
                        backgroundColor: '#415A77',
                        borderColor: '#1B263B',
                        borderWidth: 1
                    }]
                },
                options: { ...chartDefaultOptions, indexAxis: 'y', scales: { x: { beginAtZero: true, ticks: { color: '#0D1B2A' } }, y: { ticks: { color: '#0D1B2A' } } } }
            });

            constitutionChart = new Chart(document.getElementById('constitutionChart'), {
                type: 'pie',
                data: {
                    labels: langData['constitution-chart-labels'],
                    datasets: [{
                        label: langData['constitution-chart-label'],
                        data: [60, 30, 10],
                        backgroundColor: chartColors,
                        borderColor: '#FFFFFF',
                        borderWidth: 2
                    }]
                },
                options: chartDefaultOptions
            });
        }

        function updateCharts() {
            const langData = translations[currentLanguage];

            jomonEconomyChart.data.labels = langData['jomon-chart-labels'];
            jomonEconomyChart.data.datasets[0].label = langData['jomon-chart-label'];
            jomonEconomyChart.update();

            socialStructureChart.data.labels = langData['social-chart-labels'];
            socialStructureChart.data.datasets[0].label = langData['social-chart-dataset1'];
            socialStructureChart.data.datasets[1].label = langData['social-chart-dataset2'];
            socialStructureChart.data.datasets[2].label = langData['social-chart-dataset3'];
            socialStructureChart.update();

            kofunSizeChart.data.labels = langData['kofun-chart-labels'].map(label => wrapLabel(label, currentLanguage === 'en' ? 25 : 16));
            kofunSizeChart.data.datasets[0].label = langData['kofun-chart-label'];
            kofunSizeChart.update();

            constitutionChart.data.labels = langData['constitution-chart-labels'];
            constitutionChart.data.datasets[0].label = langData['constitution-chart-label'];
            constitutionChart.update();
        }

        function switchLanguage() {
            currentLanguage = currentLanguage === 'zh' ? 'en' : 'zh';
            const langData = translations[currentLanguage];
            
            document.documentElement.lang = currentLanguage === 'zh' ? 'zh-TW' : 'en';

            for (const id in langData) {
                const element = document.getElementById(id);
                if (element) {
                    if (typeof langData[id] === 'string' && id !== 'yayoi-flow3') {
                        element.textContent = langData[id];
                    } else if (id === 'yayoi-flow3') {
                         element.innerHTML = langData[id];
                    }
                }
            }
            updateCharts();
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            initializeCharts();
            document.getElementById('lang-switcher').addEventListener('click', switchLanguage);
        });
    </script>
</body>
</html>
